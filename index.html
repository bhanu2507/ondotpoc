<!DOCTYPE html>
<html>

<head>
  <title>ONDOT</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
    crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

  <!-- Isolated Version of Bootstrap, not needed if your site already uses Bootstrap -->
  <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"
  />
  <script>
    var datam
    $(document).ready(function () {
      var date_input = $('input[name="date"]'); //our date input has the name "date"
      var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
      var options = {
        format: 'mm/dd/yyyy',
        container: container,
        todayHighlight: true,
        autoclose: true,
      };
      date_input.datepicker(options);
    })

    function fun() {
      var fn = $("#fn").val()
      var mn = $("#mn").val()
      var ln = $("#ln").val()
      var phone = $("#phone").val()
      var add1 = $("#add1").val()
      var add2 = $("#add2").val()
      var city = $("#city").val()
      var state = $("#state").val()
      var zip = $("#zip").val()
      var date = $("#date").val()
      var ssn = $("#ssn").val()
      var es = $("#es").val()
      var income = $("#income").val()
      var ta = $("#ta").val()
      var rent = $("#rent").val()
      datam = {
        "fn": fn
        //,
        // "ln":ln,
        // "mn":mn,
        // "phone":phone,
        // "add1":add1,
        // "add2":add2,
        // "city":city,
        // "state":state,
        // "date":date,
        // "zip":zip,
        // "ssn":ssn,
        // "es":es,
        // "income":income,
        // "ta":ta,
        // "rent":rent
      }
      alert("hello" + fn + mn + ln + phone + add1 + add2 + city + state + zip + date + ssn + es + income + ta + rent)
      if (document.getElementById("confirmation").style.display === "none") {
        document.getElementById("confirmation").style.display = "block";
    } 
      document.getElementById("container").style.display = "none";

      document.getElementById("confirmation").innerHTML = "<h1>Your details are as follows</h1><br/>" +
        "First Name: " + fn + "<br/><br/>" +
        "Middle Name: " + mn + "<br/><br/>" +
        "Last Name: " + ln + "<br/><br/>" +
        "Phone: " + phone + "<br/><br/>" +
        "Address 1: " + add1 + "<br/><br/>" +
        "Address 2: " + add2 + "<br/><br/>" +
        "City: " + city + "<br/><br/>" +
        "Zip: " + zip + "<br><br/>" +
        "Date OF Birth: " + date + "<br/><br/>" +
        "SSN: " + ssn + "<br/><br/>" +
        "Employment Status: " + es + "<br/><br/>" +
        "Total Asset: " + ta + "<br/><br/>" +
        "Rent: " + rent + "<br/><br/>" +
        '<input type="button" class="btn btn-success" value="Confirm" style="height:50px;width:50%;margin-right: auto;margin-left: auto" onclick="fun2()"/>' +
        '<input type="button" class="btn btn-danger" value="Edit" style="height:50px;width:50%;margin-right: auto;margin-left: auto" onclick="fun3()"/>'

    }
    function fun3() {
      document.getElementById("confirmation").style.display = "none";
      document.getElementById("container").style.display = "block";

    }


    function fun2() {
      URL = "https://bea34f12.ngrok.io/echo"
      datam = JSON.stringify(datam);

      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
      xmlhttp.open("POST", URL, false);
      xmlhttp.setRequestHeader("Content-Type", "application/json");
      xmlhttp.setRequestHeader('Authorization', 'Basic ' + window.btoa('apiusername:apiuserpassword')); //in prod, you should encrypt user name and password and provide encrypted keys here instead 
      xmlhttp.onreadystatechange = callbackFunction(xmlhttp);
      xmlhttp.send(datam);
      document.getElementById("confirmation").style.display = "none";
      var msg = JSON.parse(xmlhttp.responseText)

      document.getElementById("congrats").innerHTML = "<h1 style='color:green'>" + msg.speech + "</h1>"
    }
    function callbackFunction(xmlhttp) {
      //alert(xmlhttp.responseXML);
    }
  </script>
</head>

<body>

  <div style="height:15%;width:50%;margin-left: auto;margin-right: auto;color:orange">
    <h1>Ondot Credit Card Application</h1>
  </div>
  <hr style="height:30%"><br></br>


  <div id="container" style="height:auto;width:50%;margin-left: auto;margin-right: auto">
    <div class="form-group">
      <label for="usr">First Name:</label>
      <input type="text" class="form-control" id="fn" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Middle Name:</label>
      <input type="text" class="form-control" id="mn" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Last Name:</label>
      <input type="text" class="form-control" id="ln" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Phone:</label>
      <input type="text" class="form-control" id="phone" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Address1:</label>
      <input type="text" class="form-control" id="add1" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Address2:</label>
      <input type="text" class="form-control" id="add2" required="required">
    </div>
    <div class="form-group">
      <label for="usr">City:</label>
      <input type="text" class="form-control" id="city" required="required">
    </div>
    <div class="form-group">
      <label for="usr">State:</label>
      <input type="text" class="form-control" id="state" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Zip:</label>
      <input type="text" class="form-control" id="zip" required="required">
    </div>
    <div class="bootstrap-iso">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-6 col-sm-6 col-xs-12">


            <!-- Date input -->
            <label for="usr">Date of Birth</label>
            <input class="form-control" id="date" name="date" placeholder="MM/DD/YYY" type="text" required="required"/>


          </div>
        </div>
      </div>
    </div><br/>
    <div class="form-group">
      <label for="usr">SSN:</label>
      <input type="text" class="form-control" id="ssn" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Employment Status:</label>
      <input type="text" class="form-control" id="es" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Income:</label>
      <input type="text" class="form-control" id="income" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Rent:</label>
      <input type="text" class="form-control" id="rent" required="required">
    </div>
    <div class="form-group">
      <label for="usr">Total Assets:</label>
      <input type="text" class="form-control" id="ta" required="required">
    </div>
    <br>
    <div style="height:50px;width:50%;margin-right: auto;margin-left: auto">
      <input type="button" class="btn btn-success" value="Confirm" style="height:50px;width:50%;margin-right: auto;margin-left: auto"
        onclick="fun()" />
    </div>

  </div>
  <div id="confirmation" style="height:50px;width:50%;margin-right: auto;margin-left: auto"></div>
  </div>
  <div id="congrats" style="height:50px;width:50%;margin-right: auto;margin-left: auto"></div>
  <br><br><br><br>

</body>

</html>